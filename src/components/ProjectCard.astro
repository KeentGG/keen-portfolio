---
import TechLabel from './TechLabel.astro'
import { cn } from '../utils/utils'

const {
    startColor,
    endColor,
    title,
    skills,
    accentColor,
    photoName,
    class: className,
} = Astro.props
---

<div
    class={cn(
        'w-full text-white bg-gradient-to-b from-[var(--projectStartColor)] to-[var(--projectEndColor)] from-[40%] to-[110%] aspect-[0.9] md:aspect-[1.3] rounded-2xl flex flex-col justify-between items-center overflow-hidden px-8',
        className
    )}
>
    <div
        class="-mt-4 pt-2 pl-4 flex flex-col justify-center items-start w-full h-full"
    >
        <h2
            class="max-w-[85%] font-bold text-[1.6rem]
            text-[var(--projectAccentColor)] leading-8"
        >
            {title}
        </h2>
        <div
            class="h-px max-w-[24rem] w-full bg-gradient-to-r
            from-[var(--projectAccentColor)] from-[-30%]
            to-transparent opacity-30 mt-3 mb-4"
        >
        </div>
        <div class="flex flex-wrap gap-1 opacity-75">
            {
                skills.map((skill: string, _i: number) => (
                    <TechLabel
                        accentColor={accentColor}
                        label={skill}
                        desaturate={20}
                    />
                ))
            }
        </div>
    </div>
    <div class="relative max-h-[45%] h-full w-full perspective mt-4">
        <div
            class="relative z-40 w-full h-full rounded-xl rounded-b-none bg-gray-500 border-[3px]
            border-white border-b-0 shadow-[5px_14px_32px_-6px_rgba(0,0,0,0.75)] overflow-hidden"
        >
            <img
                src=`/images/portfolio/${photoName}.png`
                class="w-full h-auto object-contain"
            />
        </div>
        <div
            class="absolute overflow-hidden top-0 z-20 scale-[0.95] -translate-y-[18px] w-full h-full
            rounded-xl rounded-b-none bg-slate-400 border-[3px] border-white border-b-0 shadow-[5px_14px_32px_-6px_rgba(0,0,0,0.60)]"
        >
            <img
                src=`/images/portfolio/${photoName}.png`
                class="w-full h-auto object-contain blur-md"
            />
        </div>
        <div
            class="absolute opacity-40 overflow-hidden top-0 z-10 scale-[0.90] -translate-y-[32px] w-full h-full
            rounded-xl rounded-b-none bg-slate-400 border-[3px] border-white border-b-0 shadow-[5px_14px_32px_-6px_rgba(0,0,0,0.50)]"
        >
            <img
                src=`/images/portfolio/${photoName}.png`
                class="w-full h-auto object-contain blur-lg"
            />
        </div>
    </div>
</div>

<style
    define:vars={{
        projectStartColor: `${startColor}`,
        projectEndColor: `${endColor}`,
        projectAccentColor: `${accentColor}`,
    }}
></style>
